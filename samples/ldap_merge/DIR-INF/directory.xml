<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE directory PUBLIC
  "-//Penrose/DTD Directory ${product.specification}//EN"
  "http://penrose.safehaus.org/dtd/directory.dtd">

<directory>

  <entry dn="dc=Merge,dc=Example,dc=com">
    <oc>dcObject</oc>
    <oc>organization</oc>
    <at name="dc" rdn="true">
      <constant>Merge</constant>
    </at>
    <at name="o">
      <constant>Merge</constant>
    </at>
    <aci>
      <permission>rs</permission>
    </aci>
  </entry>

  <entry dn="ou=Users,dc=Merge,dc=Example,dc=com">
    <oc>organizationalUnit</oc>
    <at name="ou" rdn="true">
      <constant>Users</constant>
    </at>
  </entry>

  <entry dn="uid=...,ou=Users,dc=Merge,dc=Example,dc=com">
    <entry-class>org.safehaus.penrose.ldap.directory.LDAPMergeEntry</entry-class>
    <oc>account</oc>
    <oc>posixAccount</oc>
    <at name="uid" rdn="true">
      <variable>u1.uid</variable>
    </at>
    <at name="uid" rdn="true">
      <variable>u2.uid</variable>
    </at>
    <at name="cn">
      <variable>u1.cn</variable>
    </at>
    <at name="cn">
      <variable>u2.cn</variable>
    </at>
    <at name="sn">
      <variable>u1.sn</variable>
    </at>
    <at name="sn">
      <variable>u2.sn</variable>
    </at>
    <at name="givenName">
      <variable>u1.givenName</variable>
    </at>
    <at name="givenName">
      <variable>u2.givenName</variable>
    </at>
    <source alias="u1">
      <source-name>users1</source-name>
      <field name="uid">
        <variable>uid</variable>
      </field>
      <field name="cn">
        <variable>cn</variable>
      </field>
      <field name="sn">
        <variable>sn</variable>
      </field>
      <field name="givenName">
        <variable>givenName</variable>
      </field>
    </source>
    <source alias="u2">
      <source-name>users2</source-name>
      <field name="uid">
        <variable>uid</variable>
      </field>
      <field name="cn">
        <variable>cn</variable>
      </field>
      <field name="sn">
        <variable>sn</variable>
      </field>
      <field name="givenName">
        <variable>givenName</variable>
      </field>
    </source>
  </entry>

  <entry dn="ou=Groups,dc=Merge,dc=Example,dc=com">
    <oc>organizationalUnit</oc>
    <at name="ou" rdn="true">
      <constant>Groups</constant>
    </at>
  </entry>

  <entry dn="cn=...,ou=Groups,dc=Merge,dc=Example,dc=com">
    <entry-class>org.safehaus.penrose.ldap.directory.LDAPMergeEntry</entry-class>
    <oc>posixGroup</oc>
    <at name="cn" rdn="true">
      <variable>g1.cn</variable>
    </at>
    <at name="memberUid">
      <variable>g1.memberUid</variable>
    </at>
    <source alias="g1">
      <source-name>groups1</source-name>
      <field name="cn">
        <variable>cn</variable>
      </field>
      <field name="memberUid">
        <variable>memberUid</variable>
      </field>
    </source>
  </entry>

</directory>
