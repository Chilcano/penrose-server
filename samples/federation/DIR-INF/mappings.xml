<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mappings PUBLIC
  "-//Penrose/DTD Mappings ${product.specification}//EN"
  "http://penrose.safehaus.org/dtd/mappings.dtd">

<mappings>

  <mapping name="users">
    <pre>
if (n == void || n == null) return;
if (n.gecos == void || n.gecos == null) return;
if (n.cn == void || n.cn == null) n.cn = n.gecos;
    </pre>
    <rule name="objectClass">
      <constant>posixAccount</constant>
    </rule>
    <rule name="objectClass">
      <constant>shadowAccount</constant>
    </rule>
    <rule name="uid">
      <variable>n.uid</variable>
    </rule>
    <rule name="userPassword" required="false">
      <condition>!n.userPassword.equals("NULL")</condition>
      <variable>n.userPassword</variable>
    </rule>
    <rule name="userPassword" required="false">
      <condition>!g.userPassword.equals("NULL")</condition>
      <variable>g.userPassword</variable>
    </rule>
    <rule name="gecos" required="false">
      <condition>!n.gecos.equals("NULL")</condition>
      <variable>n.gecos</variable>
    </rule>
    <rule name="gecos" required="false">
      <condition>!g.gecos.equals("NULL")</condition>
      <variable>g.gecos</variable>
    </rule>
    <rule name="uidNumber" required="false">
      <condition>!n.uidNumber.equals("0")</condition>
      <variable>n.uidNumber</variable>
    </rule>
    <rule name="uidNumber" required="false">
      <condition>!g.uidNumber.equals("0")</condition>
      <variable>g.uidNumber</variable>
    </rule>
    <rule name="loginShell" required="false">
      <condition>!n.loginShell.equals("NULL")</condition>
      <variable>n.loginShell</variable>
    </rule>
    <rule name="loginShell" required="false">
      <condition>!g.loginShell.equals("NULL")</condition>
      <variable>g.loginShell</variable>
    </rule>
    <rule name="homeDirectory" required="false">
      <condition>!n.homeDirectory.equals("NULL")</condition>
      <variable>n.homeDirectory</variable>
    </rule>
    <rule name="homeDirectory" required="false">
      <condition>!g.homeDirectory.equals("NULL")</condition>
      <variable>g.homeDirectory</variable>
    </rule>
    <rule name="gidNumber" required="false">
      <condition>!n.gidNumber.equals("0")</condition>
      <variable>n.gidNumber</variable>
    </rule>
    <rule name="gidNumber" required="false">
      <condition>!g.gidNumber.equals("0")</condition>
      <variable>g.gidNumber</variable>
    </rule>
    <rule name="cn" required="false">
      <condition>!n.cn.equals("NULL")</condition>
      <variable>n.cn</variable>
    </rule>
    <rule name="cn" required="false">
      <condition>!g.cn.equals("NULL")</condition>
      <variable>g.cn</variable>
    </rule>
    <rule name="description">
     <condition>!n.description.equals("NULL")</condition>
      <variable>n.description</variable>
    </rule>
    <rule name="description">
     <condition>!g.description.equals("NULL")</condition>
      <variable>g.description</variable>
    </rule>
    <rule name="shadowLastChange">
      <variable>n.shadowLastChange</variable>
    </rule>
    <rule name="shadowMin">
      <variable>n.shadowMin</variable>
    </rule>
    <rule name="shadowMax">
      <variable>n.shadowMax</variable>
    </rule>
    <rule name="shadowWarning">
      <variable>n.shadowWarning</variable>
    </rule>
    <rule name="shadowInactive">
      <variable>n.shadowInactive</variable>
    </rule>
    <rule name="shadowExpire">
      <variable>n.shadowExpire</variable>
    </rule>
    <rule name="shadowFlag">
      <variable>n.shadowFlag</variable>
    </rule>
  </mapping>

  <mapping name="users_to_nis_users">
    <rule name="uid">
      <variable>uid</variable>
    </rule>
    <rule name="gecos">
      <variable>gecos</variable>
    </rule>
    <rule name="uidNumber">
      <variable>uidNumber</variable>
    </rule>
    <rule name="loginShell">
      <variable>loginShell</variable>
    </rule>
    <rule name="homeDirectory">
      <variable>homeDirectory</variable>
    </rule>
    <rule name="gidNumber">
      <variable>gidNumber</variable>
    </rule>
    <rule name="cn">
      <variable>cn</variable>
    </rule>
    <rule name="description">
      <variable>description</variable>
    </rule>
    <rule name="shadowLastChange">
      <variable>shadowLastChange</variable>
    </rule>
    <rule name="shadowMin">
      <variable>shadowMin</variable>
    </rule>
    <rule name="shadowMax">
      <variable>shadowMax</variable>
    </rule>
    <rule name="shadowWarning">
      <variable>shadowWarning</variable>
    </rule>
    <rule name="shadowInactive">
      <variable>shadowInactive</variable>
    </rule>
    <rule name="shadowExpire">
      <variable>shadowExpire</variable>
    </rule>
    <rule name="shadowFlag">
      <variable>shadowFlag</variable>
    </rule>
  </mapping>

  <mapping name="users_to_global_users">
    <rule name="gecos">
      <variable>gecos</variable>
    </rule>
    <rule name="uidNumber">
      <variable>uidNumber</variable>
    </rule>
    <rule name="loginShell">
      <variable>loginShell</variable>
    </rule>
    <rule name="homeDirectory">
      <variable>homeDirectory</variable>
    </rule>
    <rule name="gidNumber">
      <variable>gidNumber</variable>
    </rule>
    <rule name="cn">
      <variable>cn</variable>
    </rule>
    <rule name="description">
      <variable>description</variable>
    </rule>
  </mapping>

</mappings>